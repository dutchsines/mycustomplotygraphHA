type: custom:bubble-card
card_type: button
button_type: state
entity: sensor.h5104_6370_temperature
name: Bathroom
show_state: false
show_icon: false
card_layout: normal
grid_options:
  columns: 3.5
  rows: auto
scrolling_effect: false
card_mod:
  style: >
    :host {
      --bubble-border-radius: 16px !important;
    } /* 1. Transparent card background */  ha-card, .bubble-card,
    .card-content, #card {
      background: transparent !important;
      box-shadow: none !important;
      border: none !important;
    }

    /* 2. Dynamic Card Name (Top Status + Battery Emoji) */  .bubble-name {
      visibility: hidden;
      position: relative;
    }

    .bubble-name::before {
      visibility: visible;
      position: absolute;
      left: 0; right: 0;
      text-align: center;
      font-size: 1.1em;
      font-weight: 900;

      {% set battery = states('sensor.h5104_6370_battery') | float(0) %}

      /* Battery color */
      {% if battery >= 80 %}
        {% set title_color = 'var(--success-color)' %}
        {% set battery_emoji = "ğŸ”‹" %}
      {% elif battery >= 50 %}
        {% set title_color = 'var(--info-color)' %}
        {% set battery_emoji = "ğŸŸ¢" %}
      {% elif battery >= 30 %}
        {% set title_color = 'var(--warning-color)' %}
        {% set battery_emoji = "ğŸŸ¡" %}
      {% elif battery >= 15 %}
        {% set title_color = 'var(--error-color)' %}
        {% set battery_emoji = "ğŸŸ " %}
      {% else %}
        {% set title_color = '#ff0000' %}
        {% set battery_emoji = "âŒ" %}
      {% endif %}

      content: "{{ battery_emoji }} Bathroom {{ battery_emoji }}";
      color: {{ title_color }} !important;
    }

    /* 3. Temperature + Humidity text with individual colors */  .state {
      font-size: 1em;
      font-weight: 700;
      text-align: center;
      position: relative;
      margin-bottom: 0em;
    }

    /* Temperature part */  .state::before {
      {% set t = states('sensor.h5104_6370_temperature') | float(0) | round(0) %}
      {% if t < 60 %}
        {% set temp_emoji = "ğŸ¥¶" %}
        {% set temp_color = 'var(--info-color)' %}
      {% elif t < 75 %}
        {% set temp_emoji = "ğŸ¤“" %}
        {% set temp_color = 'var(--success-color)' %}
      {% elif t < 85 %}
        {% set temp_emoji = "ğŸ˜“" %}
        {% set temp_color = 'var(--warning-color)' %}
      {% elif t < 90 %}
        {% set temp_emoji = "ğŸ¥µ" %}
        {% set temp_color = 'var(--error-color)' %}
      {% else %}
        {% set temp_emoji = "âŒ" %}
        {% set temp_color = 'var(--error-color)' %}
      {% endif %}
      content: "{{ temp_emoji }} {{ t }}Â°";
      color: {{ temp_color }} !important;
    }

    /* Humidity part */  .state::after {
      {% set humidity = states('sensor.h5104_6370_humidity') | float(0) | int %}
      {% if humidity >= 70 %}
        {% set hum_emoji = "ğŸ’¦" %}
        {% set hum_color = 'var(--info-color)' %}
      {% elif humidity >= 60 %}
        {% set hum_emoji = "â˜ï¸" %}
        {% set hum_color = 'var(--warning-color)' %}
      {% elif humidity >= 30 %}
        {% set hum_emoji = "âœ…" %}
        {% set hum_color = 'var(--success-color)' %}
      {% elif humidity >= 20 %}
        {% set hum_emoji = "ğŸ’¨" %}
        {% set hum_color = '#daa520' %}
      {% else %}
        {% set hum_emoji = "ğŸœï¸" %}
        {% set hum_color = '#a0522d' %}
      {% endif %}
      content: "â–{{ humidity }}% {{ hum_emoji }}";
      color: {{ hum_color }} !important;
    }

    /* 4. Dynamic bubble button background using linear gradient */
    .bubble-button,  .bubble-button-inner {
      {% set t = states('sensor.h5104_6370_temperature') | float(0) %}
      {% set temp_color = 'rgba(255,255,255,0.05)' %}
      {% if t < 60 %}
        {% set temp_color = 'rgba(0, 125, 255, 0.2)' %}
      {% elif t < 75 %}
        {% set temp_color = 'rgba(0, 200, 0, 0.2)' %}
      {% elif t < 85 %}
        {% set temp_color = 'rgba(255, 165, 0, 0.2)' %}
      {% elif t < 90 %}
        {% set temp_color = 'rgba(255, 0, 0, 0.2)' %}
      {% else %}
        {% set temp_color = 'rgba(200, 0, 0, 0.3)' %}
      {% endif %}

      {% set h = states('sensor.h5104_6370_humidity') | float(0) %}
      {% set hum_color = 'rgba(0,0,0,0.05)' %}
      {% if h >= 70 %}
        {% set hum_color = 'rgba(0, 150, 255, 0.2)' %}
      {% elif h >= 60 %}
        {% set hum_color = 'rgba(255, 165, 0, 0.2)' %}
      {% elif h >= 30 %}
        {% set hum_color = 'rgba(0, 200, 0, 0.2)' %}
      {% else %}
        {% set hum_color = 'rgba(160, 82, 45, 0.2)' %}
      {% endif %}

      background: linear-gradient(
        to right,
        {{ temp_color }} 0%,
        {{ hum_color }} 100%
      ) !important;

      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      border: none !important;
